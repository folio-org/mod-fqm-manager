{
  id: 'b5ffa2e9-8080-471a-8003-a8c5a1274503',
  name: 'simple_organization',
  private: true,
  sources: [
    {
      alias: 'org',
      type: 'db',
      target: 'src_organizations',
    },
  ],
  requiredPermissions: [
    'organizations.organizations.collection.get',
    'organizations-storage.organization-types.collection.get',
    'organizations-storage.categories.collection.get',
    'acquisitions-units.units.collection.get',
  ],
  columns: [
    {
      name: 'id',
      sourceAlias: 'org',
      dataType: {
        dataType: 'rangedUUIDType',
      },
      isIdColumn: true,
      queryable: true,
      visibleByDefault: false,
      essential: true,
      valueGetter: ':sourceAlias.id',
    },
    // used as id columns for name/code, so the backend can properly use the IDs without the UI auto-hiding the regular ID
    {
      name: '_id',
      sourceAlias: 'org',
      dataType: {
        dataType: 'rangedUUIDType',
      },
      isIdColumn: false,
      queryable: false,
      hidden: true,
      visibleByDefault: false,
      essential: true,
      valueGetter: ':sourceAlias.id',
    },
    {
      name: 'created_at',
      sourceAlias: 'org',
      dataType: {
        dataType: 'dateTimeType',
      },
      isIdColumn: false,
      queryable: true,
      visibleByDefault: false,
      valueGetter: ':sourceAlias.creation_date',
      valueFunction: '(:value)::timestamp',
    },
    {
      name: 'created_by',
      sourceAlias: 'org',
      dataType: {
        dataType: 'rangedUUIDType',
      },
      isIdColumn: false,
      queryable: true,
      visibleByDefault: false,
      hidden: true,
      valueGetter: ':sourceAlias.created_by',
      joinsTo: [
        {
          targetId: 'bb058933-cd06-4539-bd3a-6f248ff98ee2', // simple_user_details
          targetField: 'id',
          type: 'equality-cast-uuid',
          direction: 'left',
        },
        {
          targetId: 'f2615ea6-450b-425d-804d-6a495afd9308', // simple_FOLIO_user
          targetField: 'id',
          type: 'equality-cast-uuid',
          direction: 'left',
        },
      ],
    },
    {
      name: 'updated_at',
      sourceAlias: 'org',
      dataType: {
        dataType: 'dateTimeType',
      },
      isIdColumn: false,
      queryable: true,
      visibleByDefault: true,
      valueGetter: ":sourceAlias.jsonb->'metadata'->>'updatedDate'",
    },
    {
      name: 'updated_by',
      sourceAlias: 'org',
      dataType: {
        dataType: 'rangedUUIDType',
      },
      isIdColumn: false,
      queryable: true,
      visibleByDefault: false,
      hidden: true,
      valueGetter: ":sourceAlias.jsonb->'metadata'->>'updatedByUserId'",
      joinsTo: [
        {
          targetId: 'bb058933-cd06-4539-bd3a-6f248ff98ee2', // simple_user_details
          targetField: 'id',
          type: 'equality-cast-uuid',
          direction: 'left',
        },
        {
          targetId: 'f2615ea6-450b-425d-804d-6a495afd9308', // simple_FOLIO_user
          targetField: 'id',
          type: 'equality-cast-uuid',
          direction: 'left',
        },
      ],
    },
    {
      name: 'name',
      sourceAlias: 'org',
      dataType: {
        dataType: 'stringType',
      },
      isIdColumn: false,
      queryable: true,
      visibleByDefault: true,
      essential: true,
      valueGetter: ":sourceAlias.jsonb->>'name'",
      filterValueGetter: "lower(${tenant_id}_mod_organizations_storage.f_unaccent(:sourceAlias.jsonb ->> 'name'::text))",
      valueFunction: 'lower(${tenant_id}_mod_organizations_storage.f_unaccent(:value))',
      idColumnName: '_id',
      source: {
        entityTypeId: 'b5ffa2e9-8080-471a-8003-a8c5a1274503',
        name: 'organization', // shows org finder in query builder, for when we can't return all orgs via valueSourceApi
        columnName: 'name',
      },
      // we still want to pre-fill organizations though
      valueSourceApi: {
        path: 'organizations/organizations',
        valueJsonPath: '$.organizations.*.id',
        labelJsonPath: '$.organizations.*.name',
      },
    },
    {
      name: 'code',
      sourceAlias: 'org',
      dataType: {
        dataType: 'stringType',
      },
      isIdColumn: false,
      queryable: true,
      visibleByDefault: true,
      essential: true,
      valueGetter: ":sourceAlias.jsonb->>'code'",
      filterValueGetter: "lower(${tenant_id}_mod_organizations_storage.f_unaccent(:sourceAlias.jsonb ->> 'code'::text))",
      valueFunction: 'lower(${tenant_id}_mod_organizations_storage.f_unaccent(:value))',
      idColumnName: '_id',
      source: {
        entityTypeId: 'b5ffa2e9-8080-471a-8003-a8c5a1274503',
        name: 'organization', // shows org finder in query builder, for when we can't return all orgs via valueSourceApi
        columnName: 'code',
      },
      // we still want to pre-fill organizations though
      valueSourceApi: {
        path: 'organizations/organizations',
        valueJsonPath: '$.organizations.*.id',
        labelJsonPath: '$.organizations.*.code',
      },
    },
    {
      name: 'description',
      sourceAlias: 'org',
      dataType: {
        dataType: 'stringType',
      },
      isIdColumn: false,
      queryable: true,
      visibleByDefault: false,
      valueGetter: ":sourceAlias.jsonb->>'description'",
      filterValueGetter: "lower(${tenant_id}_mod_organizations_storage.f_unaccent(:sourceAlias.jsonb ->> 'description'::text))",
      valueFunction: 'lower(${tenant_id}_mod_organizations_storage.f_unaccent(:value))',
    },
    {
      name: 'export_to_accounting',
      sourceAlias: 'org',
      dataType: {
        dataType: 'booleanType',
      },
      isIdColumn: false,
      queryable: true,
      visibleByDefault: false,
      valueGetter: ":sourceAlias.jsonb->>'exportToAccounting'",
      values: [
        {
          value: 'true',
          label: 'True',
        },
        {
          value: 'false',
          label: 'False',
        },
      ],
    },
    {
      name: 'status',
      sourceAlias: 'org',
      dataType: {
        dataType: 'stringType',
      },
      isIdColumn: false,
      queryable: true,
      visibleByDefault: true,
      essential: true,
      valueGetter: ":sourceAlias.jsonb->>'status'",
      filterValueGetter: '"left"(lower(${tenant_id}_mod_organizations_storage.f_unaccent(:sourceAlias.jsonb ->> \'status\'::text)), 600)',
      valueFunction: '"left"(lower(${tenant_id}_mod_organizations_storage.f_unaccent(:value)), 600)',
      values: [
        {
          value: 'Active',
          label: 'Active',
        },
        {
          value: 'Inactive',
          label: 'Inactive',
        },
        {
          value: 'Pending',
          label: 'Pending',
        },
      ],
    },
    {
      name: 'type_ids',
      sourceAlias: 'org',
      dataType: {
        dataType: 'jsonbArrayType',
        itemDataType: {
          dataType: 'stringType',
        },
      },
      isIdColumn: false,
      queryable: false,
      visibleByDefault: false,
      valueGetter: "(:sourceAlias.jsonb -> 'organizationTypes')",
      filterValueGetter: "(:sourceAlias.jsonb -> 'organizationTypes')",
    },
    {
      name: 'type_names',
      sourceAlias: 'org',
      dataType: {
        dataType: 'jsonbArrayType',
        itemDataType: {
          dataType: 'stringType',
        },
      },
      idColumnName: 'type_ids',
      queryable: true,
      visibleByDefault: false,
      valueGetter: "( SELECT jsonb_agg(a.jsonb ->> 'name') FILTER (WHERE (a.jsonb ->> 'name') IS NOT NULL) FROM jsonb_array_elements_text(:sourceAlias.jsonb -> 'organizationTypes') record(value) JOIN src_organization_types a ON record.value::text = a.id::text )",
      filterValueGetter: "( SELECT jsonb_agg(lower(a.jsonb ->> 'name')) FILTER (WHERE (a.jsonb ->> 'name') IS NOT NULL) FROM jsonb_array_elements_text(:sourceAlias.jsonb -> 'organizationTypes') record(value) JOIN src_organization_types a ON record.value::text = a.id::text )",
      source: {
        entityTypeId: '85a2b008-af8d-4890-9490-421cabcb7bad',
        columnName: 'name',
      },
    },
    {
      name: 'language',
      sourceAlias: 'org',
      dataType: {
        dataType: 'stringType',
      },
      isIdColumn: false,
      queryable: true,
      visibleByDefault: false,
      valueGetter: ":sourceAlias.jsonb->>'language'",
    },
    {
      name: 'aliases',
      sourceAlias: 'org',
      dataType: {
        dataType: 'arrayType',
        itemDataType: {
          dataType: 'objectType',
          properties: [
            {
              name: 'value',
              property: 'value',
              dataType: {
                dataType: 'stringType',
              },
              queryable: false,
              valueGetter: "( SELECT array_agg(elems.value->>'value') FROM jsonb_array_elements(:sourceAlias.jsonb->'aliases') AS elems)",
              filterValueGetter: "( SELECT array_agg(lower(elems.value->>'value')) FROM jsonb_array_elements(:sourceAlias.jsonb->'aliases') AS elems)",
              valueFunction: 'lower(:value)',
            },
            {
              name: 'description',
              property: 'description',
              dataType: {
                dataType: 'stringType',
              },
              queryable: false,
              valueGetter: "( SELECT array_agg(elems.value->>'description') FROM jsonb_array_elements(:sourceAlias.jsonb->'aliases') AS elems)",
              filterValueGetter: "( SELECT array_agg(lower(elems.value->>'description')) FROM jsonb_array_elements(:sourceAlias.jsonb->'aliases') AS elems)",
              valueFunction: 'lower(:value)',
            },
          ],
        },
      },
      isIdColumn: false,
      queryable: false,
      visibleByDefault: false,
      valueGetter: ":sourceAlias.jsonb->>'aliases'",
    },
    {
      name: 'addresses',
      sourceAlias: 'org',
      dataType: {
        dataType: 'arrayType',
        itemDataType: {
          dataType: 'objectType',
          properties: [
            //            {
            //              name: 'id',
            //              property: 'id',
            //              dataType: {
            //                dataType: 'rangedUUIDType',
            //              },
            //              queryable: false,
            //              valueGetter: "( SELECT array_agg(elems.value->>'id') FROM jsonb_array_elements(:sourceAlias.jsonb->'addresses') AS elems)",
            //              filterValueGetter: "( SELECT array_agg(lower(elems.value->>'id')) FROM jsonb_array_elements(:sourceAlias.jsonb->'addresses') AS elems)",
            //              valueFunction: 'lower(:value)',
            //            },
            {
              name: 'address_line1',
              property: 'addressLine1',
              dataType: {
                dataType: 'stringType',
              },
              queryable: false,
              valueGetter: "( SELECT array_agg(elems.value->>'addressLine1') FROM jsonb_array_elements(:sourceAlias.jsonb->'addresses') AS elems)",
              filterValueGetter: "( SELECT array_agg(lower(elems.value->>'addressLine1')) FROM jsonb_array_elements(:sourceAlias.jsonb->'addresses') AS elems)",
              valueFunction: 'lower(:value)',
            },
            {
              name: 'address_line2',
              property: 'addressLine2',
              dataType: {
                dataType: 'stringType',
              },
              queryable: false,
              valueGetter: "( SELECT array_agg(elems.value->>'addressLine2') FROM jsonb_array_elements(:sourceAlias.jsonb->'addresses') AS elems)",
              filterValueGetter: "( SELECT array_agg(lower(elems.value->>'addressLine2')) FROM jsonb_array_elements(:sourceAlias.jsonb->'addresses') AS elems)",
              valueFunction: 'lower(:value)',
            },
            {
              name: 'city',
              property: 'city',
              dataType: {
                dataType: 'stringType',
              },
              queryable: false,
              valueGetter: "( SELECT array_agg(elems.value->>'city') FROM jsonb_array_elements(:sourceAlias.jsonb->'addresses') AS elems)",
              filterValueGetter: "( SELECT array_agg(lower(elems.value->>'city')) FROM jsonb_array_elements(:sourceAlias.jsonb->'addresses') AS elems)",
              valueFunction: 'lower(:value)',
            },
            {
              name: 'state_region',
              property: 'stateRegion',
              dataType: {
                dataType: 'stringType',
              },
              queryable: false,
              valueGetter: "( SELECT array_agg(elems.value->>'stateRegion') FROM jsonb_array_elements(:sourceAlias.jsonb->'addresses') AS elems)",
              filterValueGetter: "( SELECT array_agg(lower(elems.value->>'stateRegion')) FROM jsonb_array_elements(:sourceAlias.jsonb->'addresses') AS elems)",
              valueFunction: 'lower(:value)',
            },
            {
              name: 'zip_code',
              property: 'zipCode',
              dataType: {
                dataType: 'stringType',
              },
              queryable: false,
              valueGetter: "( SELECT array_agg(elems.value->>'zipCode') FROM jsonb_array_elements(:sourceAlias.jsonb->'addresses') AS elems)",
              filterValueGetter: "( SELECT array_agg(lower(elems.value->>'zipCode')) FROM jsonb_array_elements(:sourceAlias.jsonb->'addresses') AS elems)",
              valueFunction: 'lower(:value)',
            },
            {
              name: 'country',
              property: 'country',
              dataType: {
                dataType: 'stringType',
              },
              queryable: false,
              valueGetter: "( SELECT array_agg(elems.value->>'country') FROM jsonb_array_elements(:sourceAlias.jsonb->'addresses') AS elems)",
              filterValueGetter: "( SELECT array_agg(lower(elems.value->>'country')) FROM jsonb_array_elements(:sourceAlias.jsonb->'addresses') AS elems)",
              valueFunction: 'lower(:value)',
            },
            //            {
            //              name: 'is_primary',
            //              property: 'isPrimary',
            //              dataType: {
            //                dataType: 'booleanType',
            //              },
            //              queryable: false,
            //              valueGetter: "( SELECT array_agg(elems.value->>'isPrimary') FROM jsonb_array_elements(:sourceAlias.jsonb->'addresses') AS elems)",
            //              filterValueGetter: "( SELECT array_agg(lower(elems.value->>'isPrimary')) FROM jsonb_array_elements(:sourceAlias.jsonb->'addresses') AS elems)",
            //              valueFunction: 'lower(:value)',
            //              values: [
            //                {
            //                  value: 'true',
            //                  label: 'True',
            //                },
            //                {
            //                  value: 'false',
            //                  label: 'False',
            //                },
            //              ],
            //            },
            //          {
            //              name: 'categories',
            //              property: 'categories',
            //              dataType: {
            //                dataType: 'arrayType',
            //                itemDataType: {
            //                  dataType: 'rangedUUIDType',
            //                },
            //              },
            //              queryable: false,
            //              valueGetter: "(SELECT array_agg(elems.value->>'categories \
            //                          ORDER BY elems.value->>'categories') \
            //                          FILTER (WHERE elems.value->>'categories' IS NOT NULL) \
            //                          FROM jsonb_array_elements(:sourceAlias.jsonb->'addresses') AS elems)"
            //            },
            {
              name: 'categories_names',
              property: 'categoriesNames',
              dataType: {
                dataType: 'arrayType',
                itemDataType: {
                  dataType: 'stringType',
                },
              },
              queryable: false,
              valueGetter: "(SELECT jsonb_agg(catg_name.jsonb ->> 'value' ORDER BY catg_name.jsonb ->> 'value') \
                 FROM jsonb_array_elements_text((:sourceAlias.jsonb -> 'addresses'->'categories')) id \
                 JOIN src_organization_categories catg_name ON id.value::text = catg_name.id::text \
                 WHERE id.value IS NOT NULL)",
            },

            //            {
            //              name: 'language',
            //              property: 'language',
            //              dataType: {
            //                dataType: 'stringType',
            //              },
            //              queryable: false,
            //              valueGetter: "( SELECT array_agg(elems.value->>'language') FROM jsonb_array_elements(:sourceAlias.jsonb->'addresses') AS elems)",
            //              filterValueGetter: "( SELECT array_agg(lower(elems.value->>'language')) FROM jsonb_array_elements(:sourceAlias.jsonb->'addresses') AS elems)",
            //              valueFunction: 'lower(:value)',
            //            },
          ],
        },
      },
      isIdColumn: false,
      queryable: false,
      visibleByDefault: false,
      valueGetter: "(SELECT jsonb_agg(record.value || \
                                    jsonb_build_object('categoriesNames', \
                                    (SELECT jsonb_agg(catg_name.jsonb ->> 'value') \
                                     FROM jsonb_array_elements_text(record.value -> 'categories') id \
                                     JOIN src_organization_categories catg_name \
                                       ON id.value::text = catg_name.id::text)) \
                                   ORDER BY record.value ->> 'categories') \
                 FROM jsonb_array_elements((:sourceAlias.jsonb -> 'addresses')) record(value))::text",
    },
    {
      name: 'phone_numbers',
      sourceAlias: 'org',
      dataType: {
        dataType: 'arrayType',
        itemDataType: {
          dataType: 'objectType',
          properties: [
            //            {
            //              name: 'id',
            //              property: 'id',
            //              dataType: {
            //                dataType: 'rangedUUIDType',
            //              },
            //              queryable: false,
            //              valueGetter: "( SELECT array_agg(elems.value->>'id') FROM jsonb_array_elements(:sourceAlias.jsonb->'phoneNumbers') AS elems)",
            //              filterValueGetter: "( SELECT array_agg(lower(elems.value->>'id')) FROM jsonb_array_elements(:sourceAlias.jsonb->'phoneNumbers') AS elems)",
            //              valueFunction: 'lower(:value)',
            //            },
            {
              name: 'phone_number',
              property: 'phoneNumber',
              dataType: {
                dataType: 'stringType',
              },
              queryable: false,
              valueGetter: "( SELECT array_agg(elems.value->>'phoneNumber') FROM jsonb_array_elements(:sourceAlias.jsonb->'phoneNumbers') AS elems)",
              filterValueGetter: "( SELECT array_agg(lower(elems.value->>'phoneNumber')) FROM jsonb_array_elements(:sourceAlias.jsonb->'phoneNumbers') AS elems)",
              valueFunction: 'lower(:value)',
            },
            //            {
            //              name: 'categories',
            //              property: 'categories',
            //              dataType: {
            //                dataType: 'arrayType',
            //                itemDataType: {
            //                  dataType: 'rangedUUIDType',
            //                },
            //              },
            //              queryable: false,
            //              valueGetter: "(SELECT array_agg(elems.value->>'categories \
            //                          ORDER BY elems.value->>'categories') \
            //                          FILTER (WHERE elems.value->>'categories' IS NOT NULL) \
            //                          FROM jsonb_array_elements(:sourceAlias.jsonb->'phoneNumbers') AS elems)"
            //            },
            {
              name: 'categories_names',
              property: 'categoriesNames',
              dataType: {
                dataType: 'arrayType',
                itemDataType: {
                  dataType: 'stringType',
                },
              },
              queryable: false,
              valueGetter: "(SELECT jsonb_agg(catg_name.jsonb ->> 'value' ORDER BY catg_name.jsonb ->> 'value') \
                 FROM jsonb_array_elements_text((:sourceAlias.jsonb -> 'phoneNumbers'->'categories')) id \
                 JOIN src_organization_categories catg_name ON id.value::text = catg_name.id::text \
                 WHERE id.value IS NOT NULL)",
            },
            {
              name: 'type',
              property: 'type',
              dataType: {
                dataType: 'stringType',
              },
              queryable: false,
              valueGetter: "( SELECT array_agg(elems.value->>'type') FROM jsonb_array_elements(:sourceAlias.jsonb->'phoneNumbers') AS elems)",
              filterValueGetter: "( SELECT array_agg(lower(elems.value->>'type')) FROM jsonb_array_elements(:sourceAlias.jsonb->'phoneNumbers') AS elems)",
              valueFunction: 'lower(:value)',
              values: [
                {
                  value: 'Office',
                  label: 'Office',
                },
                {
                  value: 'Mobile',
                  label: 'Mobile',
                },
                {
                  value: 'Fax',
                  label: 'Fax',
                },
                {
                  value: 'Other',
                  label: 'Other',
                },
              ],
            },
            //            {
            //              name: 'is_primary',
            //              property: 'isPrimary',
            //              dataType: {
            //                dataType: 'booleanType',
            //              },
            //              queryable: false,
            //              valueGetter: "( SELECT array_agg(elems.value->>'isPrimary') FROM jsonb_array_elements(:sourceAlias.jsonb->'phoneNumbers') AS elems)",
            //              filterValueGetter: "( SELECT array_agg(lower(elems.value->>'isPrimary')) FROM jsonb_array_elements(:sourceAlias.jsonb->'phoneNumbers') AS elems)",
            //              valueFunction: 'lower(:value)',
            //              values: [
            //                {
            //                  value: 'true',
            //                  label: 'True',
            //                },
            //                {
            //                  value: 'false',
            //                  label: 'False',
            //                },
            //              ],
            //            },
            //            {
            //              name: 'language',
            //              property: 'language',
            //              dataType: {
            //                dataType: 'stringType',
            //              },
            //              queryable: false,
            //              valueGetter: "( SELECT array_agg(elems.value->>'language') FROM jsonb_array_elements(:sourceAlias.jsonb->'phoneNumbers') AS elems)",
            //              filterValueGetter: "( SELECT array_agg(lower(elems.value->>'language')) FROM jsonb_array_elements(:sourceAlias.jsonb->'phoneNumbers') AS elems)",
            //              valueFunction: 'lower(:value)',
            //            },
          ],
        },
      },
      isIdColumn: false,
      queryable: false,
      visibleByDefault: false,
      valueGetter: "(SELECT jsonb_agg(record.value || \
                                    jsonb_build_object('categoriesNames', \
                                    (SELECT jsonb_agg(catg_name.jsonb ->> 'value') \
                                     FROM jsonb_array_elements_text(record.value -> 'categories') id \
                                     JOIN src_organization_categories catg_name \
                                       ON id.value::text = catg_name.id::text)) \
                                   ORDER BY record.value ->> 'categories') \
                 FROM jsonb_array_elements((:sourceAlias.jsonb -> 'phoneNumbers')) record(value))::text",
    },
    {
      name: 'emails',
      sourceAlias: 'org',
      dataType: {
        dataType: 'arrayType',
        itemDataType: {
          dataType: 'objectType',
          properties: [
            //            {
            //              name: 'id',
            //              property: 'id',
            //              dataType: {
            //                dataType: 'rangedUUIDType',
            //              },
            //              queryable: false,
            //              valueGetter: "( SELECT array_agg(elems.value->>'id') FROM jsonb_array_elements(:sourceAlias.jsonb->'emails') AS elems)",
            //              filterValueGetter: "( SELECT array_agg(lower(elems.value->>'id')) FROM jsonb_array_elements(:sourceAlias.jsonb->'emails') AS elems)",
            //              valueFunction: 'lower(:value)',
            //            },
            {
              name: 'value',
              property: 'value',
              dataType: {
                dataType: 'stringType',
              },
              queryable: false,
              valueGetter: "( SELECT array_agg(elems.value->>'value') FROM jsonb_array_elements(:sourceAlias.jsonb->'emails') AS elems)",
              filterValueGetter: "( SELECT array_agg(lower(elems.value->>'value')) FROM jsonb_array_elements(:sourceAlias.jsonb->'emails') AS elems)",
              valueFunction: 'lower(:value)',
            },
            {
              name: 'description',
              property: 'description',
              dataType: {
                dataType: 'stringType',
              },
              queryable: false,
              valueGetter: "( SELECT array_agg(elems.value->>'description') FROM jsonb_array_elements(:sourceAlias.jsonb->'emails') AS elems)",
              filterValueGetter: "( SELECT array_agg(lower(elems.value->>'description')) FROM jsonb_array_elements(:sourceAlias.jsonb->'emails') AS elems)",
              valueFunction: 'lower(:value)',
            },
            //            {
            //              name: 'is_primary',
            //              property: 'isPrimary',
            //              dataType: {
            //                dataType: 'booleanType',
            //              },
            //              queryable: false,
            //              valueGetter: "( SELECT array_agg(elems.value->>'isPrimary') FROM jsonb_array_elements(:sourceAlias.jsonb->'emails') AS elems)",
            //              filterValueGetter: "( SELECT array_agg(lower(elems.value->>'isPrimary')) FROM jsonb_array_elements(:sourceAlias.jsonb->'emails') AS elems)",
            //              valueFunction: 'lower(:value)',
            //              values: [
            //                {
            //                  value: 'true',
            //                  label: 'True',
            //                },
            //                {
            //                  value: 'false',
            //                  label: 'False',
            //                },
            //              ],
            //            },
            //            {
            //            {
            //              name: 'categories',
            //              property: 'categories',
            //              dataType: {
            //                dataType: 'arrayType',
            //                itemDataType: {
            //                  dataType: 'rangedUUIDType',
            //                },
            //              },
            //              queryable: false,
            //              valueGetter: "(SELECT array_agg(elems.value->>'categories \
            //                          ORDER BY elems.value->>'categories') \
            //                          FILTER (WHERE elems.value->>'categories' IS NOT NULL) \
            //                          FROM jsonb_array_elements(:sourceAlias.jsonb->'emails') AS elems)"
            //            },
            {
              name: 'categories_names',
              property: 'categoriesNames',
              dataType: {
                dataType: 'arrayType',
                itemDataType: {
                  dataType: 'stringType',
                },
              },
              queryable: false,
              valueGetter: "(SELECT jsonb_agg(catg_name.jsonb ->> 'value' ORDER BY catg_name.jsonb ->> 'value') \
                 FROM jsonb_array_elements_text((:sourceAlias.jsonb -> 'emails'->'categories')) id \
                 JOIN src_organization_categories catg_name ON id.value::text = catg_name.id::text \
                 WHERE id.value IS NOT NULL)",
            },
            //            {
            //              name: 'language',
            //              property: 'language',
            //              dataType: {
            //                dataType: 'stringType',
            //              },
            //              queryable: false,
            //              valueGetter: "( SELECT array_agg(elems.value->>'language') FROM jsonb_array_elements(:sourceAlias.jsonb->'emails') AS elems)",
            //              filterValueGetter: "( SELECT array_agg(lower(elems.value->>'language')) FROM jsonb_array_elements(:sourceAlias.jsonb->'emails') AS elems)",
            //              valueFunction: 'lower(:value)',
            //            },
          ],
        },
      },
      isIdColumn: false,
      queryable: false,
      visibleByDefault: false,
      valueGetter: "(SELECT jsonb_agg(record.value || \
                                    jsonb_build_object('categoriesNames', \
                                    (SELECT jsonb_agg(catg_name.jsonb ->> 'value') \
                                     FROM jsonb_array_elements_text(record.value -> 'categories') id \
                                     JOIN src_organization_categories catg_name \
                                       ON id.value::text = catg_name.id::text)) \
                                   ORDER BY record.value ->> 'categories') \
                 FROM jsonb_array_elements((:sourceAlias.jsonb -> 'emails')) record(value))::text",
    },
    {
      name: 'urls',
      sourceAlias: 'org',
      dataType: {
        dataType: 'arrayType',
        itemDataType: {
          dataType: 'objectType',
          properties: [
            //            {
            //              name: 'id',
            //              property: 'id',
            //              dataType: {
            //                dataType: 'rangedUUIDType',
            //              },
            //              queryable: false,
            //              valueGetter: "( SELECT array_agg(elems.value->>'id') FROM jsonb_array_elements(:sourceAlias.jsonb->'urls') AS elems)",
            //              filterValueGetter: "( SELECT array_agg(lower(elems.value->>'id')) FROM jsonb_array_elements(:sourceAlias.jsonb->'urls') AS elems)",
            //              valueFunction: 'lower(:value)',
            //            },
            {
              name: 'value',
              property: 'value',
              dataType: {
                dataType: 'stringType',
              },
              queryable: false,
              valueGetter: "( SELECT array_agg(elems.value->>'value') FROM jsonb_array_elements(:sourceAlias.jsonb->'urls') AS elems)",
              filterValueGetter: "( SELECT array_agg(lower(elems.value->>'value')) FROM jsonb_array_elements(:sourceAlias.jsonb->'urls') AS elems)",
              valueFunction: 'lower(:value)',
            },
            {
              name: 'description',
              property: 'description',
              dataType: {
                dataType: 'stringType',
              },
              queryable: false,
              valueGetter: "( SELECT array_agg(elems.value->>'description') FROM jsonb_array_elements(:sourceAlias.jsonb->'urls') AS elems)",
              filterValueGetter: "( SELECT array_agg(lower(elems.value->>'description')) FROM jsonb_array_elements(:sourceAlias.jsonb->'urls') AS elems)",
              valueFunction: 'lower(:value)',
            },
            //            {
            //              name: 'language',
            //              property: 'language',
            //              dataType: {
            //                dataType: 'stringType',
            //              },
            //              queryable: false,
            //              valueGetter: "( SELECT array_agg(elems.value->>'language') FROM jsonb_array_elements(:sourceAlias.jsonb->'urls') AS elems)",
            //              filterValueGetter: "( SELECT array_agg(lower(elems.value->>'language')) FROM jsonb_array_elements(:sourceAlias.jsonb->'urls') AS elems)",
            //              valueFunction: 'lower(:value)',
            //            },
            //            {
            //              name: 'is_primary',
            //              property: 'isPrimary',
            //              dataType: {
            //                dataType: 'booleanType',
            //              },
            //              queryable: false,
            //              valueGetter: "( SELECT array_agg(elems.value->>'isPrimary') FROM jsonb_array_elements(:sourceAlias.jsonb->'urls') AS elems)",
            //              filterValueGetter: "( SELECT array_agg(lower(elems.value->>'isPrimary')) FROM jsonb_array_elements(:sourceAlias.jsonb->'urls') AS elems)",
            //              valueFunction: 'lower(:value)',
            //              values: [
            //                {
            //                  value: 'true',
            //                  label: 'True',
            //                },
            //                {
            //                  value: 'false',
            //                  label: 'False',
            //                },
            //              ],
            //            },
            //            {
            //              name: 'categories',
            //              property: 'categories',
            //              dataType: {
            //                dataType: 'arrayType',
            //                itemDataType: {
            //                  dataType: 'rangedUUIDType',
            //                },
            //              },
            //              queryable: false,
            //              valueGetter: "(SELECT array_agg(elems.value->>'categories \
            //                          ORDER BY elems.value->>'categories') \
            //                          FILTER (WHERE elems.value->>'categories' IS NOT NULL) \
            //                          FROM jsonb_array_elements(:sourceAlias.jsonb->'urls') AS elems)"
            //            },
            {
              name: 'categories_names',
              property: 'categoriesNames',
              dataType: {
                dataType: 'arrayType',
                itemDataType: {
                  dataType: 'stringType',
                },
              },
              queryable: false,
              valueGetter: "(SELECT jsonb_agg(catg_name.jsonb ->> 'value' ORDER BY catg_name.jsonb ->> 'value') \
                 FROM jsonb_array_elements_text((:sourceAlias.jsonb -> 'urls'->'categories')) id \
                 JOIN src_organization_categories catg_name ON id.value::text = catg_name.id::text \
                 WHERE id.value IS NOT NULL)",
            },
            {
              name: 'notes',
              property: 'notes',
              dataType: {
                dataType: 'stringType',
              },
              queryable: false,
              valueGetter: "( SELECT array_agg(elems.value->>'notes') FROM jsonb_array_elements(:sourceAlias.jsonb->'urls') AS elems)",
              filterValueGetter: "( SELECT array_agg(lower(elems.value->>'notes')) FROM jsonb_array_elements(:sourceAlias.jsonb->'urls') AS elems)",
              valueFunction: 'lower(:value)',
            },
          ],
        },
      },
      isIdColumn: false,
      queryable: false,
      visibleByDefault: false,
      valueGetter: "(SELECT jsonb_agg(record.value || \
                                    jsonb_build_object('categoriesNames', \
                                    (SELECT jsonb_agg(catg_name.jsonb ->> 'value') \
                                     FROM jsonb_array_elements_text(record.value -> 'categories') id \
                                     JOIN src_organization_categories catg_name \
                                       ON id.value::text = catg_name.id::text)) \
                                   ORDER BY record.value ->> 'categories') \
                 FROM jsonb_array_elements((:sourceAlias.jsonb -> 'urls')) record(value))::text",
    },
    {
      name: 'contacts',
      sourceAlias: 'org',
      dataType: {
        dataType: 'arrayType',
        itemDataType: {
          dataType: 'rangedUUIDType',
        },
      },
      isIdColumn: false,
      queryable: false,
      visibleByDefault: false,
      hidden: true,
      valueGetter: "(\
        SELECT\
          array_agg(elems.value::text)\
        FROM\
          jsonb_array_elements_text(:sourceAlias.jsonb->'contacts') AS elems\
      )",
      filterValueGetter: "(\
        SELECT\
          array_agg(lower(elems.value::text))\
        FROM\
          jsonb_array_elements_text(:sourceAlias.jsonb->'contacts') AS elems\
      )",
    },
    {
      name: 'privileged_contacts',
      sourceAlias: 'org',
      dataType: {
        dataType: 'arrayType',
        itemDataType: {
          dataType: 'rangedUUIDType',
        },
      },
      isIdColumn: false,
      queryable: false,
      visibleByDefault: false,
      hidden: true,
      valueGetter: "(\
        SELECT\
          array_agg(elems.value::text)\
        FROM\
          jsonb_array_elements_text(:sourceAlias.jsonb->'privilegedContacts') AS elems\
      )",
      filterValueGetter: "(\
        SELECT\
          array_agg(lower(elems.value::text))\
        FROM\
          jsonb_array_elements_text(:sourceAlias.jsonb->'privilegedContacts') AS elems\
      )",
    },
    {
      name: 'agreements',
      sourceAlias: 'org',
      dataType: {
        dataType: 'arrayType',
        itemDataType: {
          dataType: 'objectType',
          properties: [
            {
              name: 'name',
              property: 'name',
              dataType: {
                dataType: 'stringType',
              },
              queryable: false,
              valueGetter: "( SELECT array_agg(elems.value->>'name') FROM jsonb_array_elements(:sourceAlias.jsonb->'agreements') AS elems)",
              filterValueGetter: "( SELECT array_agg(lower(elems.value->>'name')) FROM jsonb_array_elements(:sourceAlias.jsonb->'agreements') AS elems)",
              valueFunction: 'lower(:value)',
            },
            {
              name: 'discount',
              property: 'discount',
              dataType: {
                dataType: 'numberType',
              },
              queryable: false,
              valueGetter: "( SELECT array_agg(elems.value->>'discount') FROM jsonb_array_elements(:sourceAlias.jsonb->'agreements') AS elems)",
              filterValueGetter: "( SELECT array_agg(lower(elems.value->>'discount')) FROM jsonb_array_elements(:sourceAlias.jsonb->'agreements') AS elems)",
              valueFunction: 'lower(:value)',
            },
            {
              name: 'reference_url',
              property: 'referenceUrl',
              dataType: {
                dataType: 'stringType',
              },
              queryable: false,
              valueGetter: "( SELECT array_agg(elems.value->>'referenceUrl') FROM jsonb_array_elements(:sourceAlias.jsonb->'agreements') AS elems)",
              filterValueGetter: "( SELECT array_agg(lower(elems.value->>'referenceUrl')) FROM jsonb_array_elements(:sourceAlias.jsonb->'agreements') AS elems)",
              valueFunction: 'lower(:value)',
            },
            {
              name: 'notes',
              property: 'notes',
              dataType: {
                dataType: 'stringType',
              },
              queryable: false,
              valueGetter: "( SELECT array_agg(elems.value->>'notes') FROM jsonb_array_elements(:sourceAlias.jsonb->'agreements') AS elems)",
              filterValueGetter: "( SELECT array_agg(lower(elems.value->>'notes')) FROM jsonb_array_elements(:sourceAlias.jsonb->'agreements') AS elems)",
              valueFunction: 'lower(:value)',
            },
          ],
        },
      },
      isIdColumn: false,
      queryable: false,
      visibleByDefault: false,
      valueGetter: ":sourceAlias.jsonb->>'agreements'",
    },
    {
      name: 'accounting_code',
      sourceAlias: 'org',
      dataType: {
        dataType: 'stringType',
      },
      isIdColumn: false,
      queryable: true,
      visibleByDefault: false,
      valueGetter: ":sourceAlias.jsonb->>'erpCode'",
      filterValueGetter: "lower(${tenant_id}_mod_organizations_storage.f_unaccent(:sourceAlias.jsonb ->> 'erpCode'::text))",
      valueFunction: 'lower(${tenant_id}_mod_organizations_storage.f_unaccent(:value))',
    },
    {
      name: 'payment_method',
      sourceAlias: 'org',
      dataType: {
        dataType: 'stringType',
      },
      isIdColumn: false,
      queryable: true,
      visibleByDefault: false,
      valueGetter: ":sourceAlias.jsonb->>'paymentMethod'",
      values: [
        {
          label: 'Credit Card',
          value: 'Credit Card',
        },
        {
          label: 'Cash',
          value: 'Cash',
        },
        {
          label: 'Physical Check',
          value: 'Physical Check',
        },
        {
          label: 'EFT',
          value: 'EFT',
        },
        {
          label: 'Deposit Account',
          value: 'Deposit Account',
        },
      ],
    },
    {
      name: 'access_provider',
      sourceAlias: 'org',
      dataType: {
        dataType: 'booleanType',
      },
      isIdColumn: false,
      queryable: true,
      visibleByDefault: false,
      valueGetter: ":sourceAlias.jsonb->>'accessProvider'",
      values: [
        {
          value: 'true',
          label: 'True',
        },
        {
          value: 'false',
          label: 'False',
        },
      ],
    },
    {
      name: 'governmental',
      sourceAlias: 'org',
      dataType: {
        dataType: 'booleanType',
      },
      isIdColumn: false,
      queryable: true,
      visibleByDefault: false,
      valueGetter: ":sourceAlias.jsonb->>'governmental'",
      values: [
        {
          value: 'true',
          label: 'True',
        },
        {
          value: 'false',
          label: 'False',
        },
      ],
    },
    {
      name: 'licensor',
      sourceAlias: 'org',
      dataType: {
        dataType: 'booleanType',
      },
      isIdColumn: false,
      queryable: true,
      visibleByDefault: false,
      valueGetter: ":sourceAlias.jsonb->>'licensor'",
      values: [
        {
          value: 'true',
          label: 'True',
        },
        {
          value: 'false',
          label: 'False',
        },
      ],
    },
    {
      name: 'material_supplier',
      sourceAlias: 'org',
      dataType: {
        dataType: 'booleanType',
      },
      isIdColumn: false,
      queryable: true,
      visibleByDefault: false,
      valueGetter: ":sourceAlias.jsonb->>'materialSupplier'",
      values: [
        {
          value: 'true',
          label: 'True',
        },
        {
          value: 'false',
          label: 'False',
        },
      ],
    },
    {
      name: 'vendor_currencies',
      sourceAlias: 'org',
      dataType: {
        dataType: 'arrayType',
        itemDataType: {
          dataType: 'stringType',
        },
      },
      isIdColumn: false,
      queryable: false,
      visibleByDefault: false,
      valueGetter: "(\
        SELECT\
          array_agg(elems.value::text)\
        FROM\
          jsonb_array_elements_text(:sourceAlias.jsonb->'vendorCurrencies') AS elems\
      )",
      filterValueGetter: "(\
        SELECT\
          array_agg(lower(elems.value::text))\
        FROM\
          jsonb_array_elements_text(:sourceAlias.jsonb->'vendorCurrencies') AS elems\
      )",
    },
    {
      name: 'claiming_interval',
      sourceAlias: 'org',
      dataType: {
        dataType: 'integerType',
      },
      isIdColumn: false,
      queryable: true,
      visibleByDefault: false,
      valueGetter: "(:sourceAlias.jsonb->'claimingInterval')::integer",
      valueFunction: '(:value)::integer',
    },
    {
      name: 'discount_percent',
      sourceAlias: 'org',
      dataType: {
        dataType: 'numberType',
      },
      isIdColumn: false,
      queryable: true,
      visibleByDefault: false,
      valueGetter: "(:sourceAlias.jsonb->'discountPercent')::float",
      valueFunction: '(:value)::float',
    },
    {
      name: 'expected_activation_interval',
      sourceAlias: 'org',
      dataType: {
        dataType: 'integerType',
      },
      isIdColumn: false,
      queryable: true,
      visibleByDefault: false,
      valueGetter: "(:sourceAlias.jsonb->'expectedActivationInterval')::integer",
      valueFunction: '(:value)::integer',
    },
    {
      name: 'expected_invoice_interval',
      sourceAlias: 'org',
      dataType: {
        dataType: 'integerType',
      },
      isIdColumn: false,
      queryable: true,
      visibleByDefault: false,
      valueGetter: "(:sourceAlias.jsonb->'expectedInvoiceInterval')::integer",
      valueFunction: '(:value)::integer',
    },
    {
      name: 'renewal_activation_interval',
      sourceAlias: 'org',
      dataType: {
        dataType: 'integerType',
      },
      isIdColumn: false,
      queryable: true,
      visibleByDefault: false,
      valueGetter: "(:sourceAlias.jsonb->'renewalActivationInterval')::integer",
      valueFunction: '(:value)::integer',
    },
    {
      name: 'subscription_interval',
      sourceAlias: 'org',
      dataType: {
        dataType: 'integerType',
      },
      isIdColumn: false,
      queryable: true,
      visibleByDefault: false,
      valueGetter: "(:sourceAlias.jsonb->'subscriptionInterval')::integer",
      valueFunction: '(:value)::integer',
    },
    {
      name: 'expected_receipt_interval',
      sourceAlias: 'org',
      dataType: {
        dataType: 'integerType',
      },
      isIdColumn: false,
      queryable: true,
      visibleByDefault: false,
      valueGetter: "(:sourceAlias.jsonb->'expectedReceiptInterval')::integer",
      valueFunction: '(:value)::integer',
    },
    {
      name: 'tax_id',
      sourceAlias: 'org',
      dataType: {
        dataType: 'stringType',
      },
      isIdColumn: false,
      queryable: true,
      visibleByDefault: false,
      valueGetter: ":sourceAlias.jsonb->>'taxId'",
      filterValueGetter: "lower(${tenant_id}_mod_organizations_storage.f_unaccent(:sourceAlias.jsonb ->> 'taxId'::text))",
      valueFunction: 'lower(${tenant_id}_mod_organizations_storage.f_unaccent(:value))',
    },
    {
      name: 'liable_for_vat',
      sourceAlias: 'org',
      dataType: {
        dataType: 'booleanType',
      },
      isIdColumn: false,
      queryable: true,
      visibleByDefault: false,
      valueGetter: ":sourceAlias.jsonb->>'liableForVat'",
      values: [
        {
          value: 'true',
          label: 'True',
        },
        {
          value: 'false',
          label: 'False',
        },
      ],
    },
    {
      name: 'tax_percentage',
      sourceAlias: 'org',
      dataType: {
        dataType: 'numberType',
      },
      isIdColumn: false,
      queryable: true,
      visibleByDefault: false,
      valueGetter: "(:sourceAlias.jsonb->'taxPercentage')::float",
      valueFunction: '(:value)::float',
    },
    {
      name: 'interfaces',
      sourceAlias: 'org',
      dataType: {
        dataType: 'arrayType',
        itemDataType: {
          dataType: 'rangedUUIDType',
        },
      },
      isIdColumn: false,
      queryable: false,
      visibleByDefault: false,
      hidden: true,
      valueGetter: "(\
        SELECT\
          array_agg(elems.value::text)\
        FROM\
          jsonb_array_elements_text(:sourceAlias.jsonb->'interfaces') AS elems\
      )",
      filterValueGetter: "(\
        SELECT\
          array_agg(lower(elems.value::text))\
        FROM\
          jsonb_array_elements_text(:sourceAlias.jsonb->'interfaces') AS elems\
      )",
    },
    {
      name: 'accounts',
      sourceAlias: 'org',
      dataType: {
        dataType: 'arrayType',
        itemDataType: {
          dataType: 'objectType',
          properties: [
            {
              name: 'name',
              property: 'name',
              dataType: {
                dataType: 'stringType',
              },
              queryable: false,
              valueGetter: "( SELECT array_agg(elems.value->>'name') FROM jsonb_array_elements(:sourceAlias.jsonb->'accounts') AS elems)",
              filterValueGetter: "( SELECT array_agg(lower(elems.value->>'name')) FROM jsonb_array_elements(:sourceAlias.jsonb->'accounts') AS elems)",
              valueFunction: 'lower(:value)',
            },
            {
              name: 'account_no',
              property: 'accountNo',
              dataType: {
                dataType: 'stringType',
              },
              queryable: false,
              valueGetter: "( SELECT array_agg(elems.value->>'accountNo') FROM jsonb_array_elements(:sourceAlias.jsonb->'accounts') AS elems)",
              filterValueGetter: "( SELECT array_agg(lower(elems.value->>'accountNo')) FROM jsonb_array_elements(:sourceAlias.jsonb->'accounts') AS elems)",
              valueFunction: 'lower(:value)',
            },
            {
              name: 'description',
              property: 'description',
              dataType: {
                dataType: 'stringType',
              },
              queryable: false,
              valueGetter: "( SELECT array_agg(elems.value->>'description') FROM jsonb_array_elements(:sourceAlias.jsonb->'accounts') AS elems)",
              filterValueGetter: "( SELECT array_agg(lower(elems.value->>'description')) FROM jsonb_array_elements(:sourceAlias.jsonb->'accounts') AS elems)",
              valueFunction: 'lower(:value)',
            },
            {
              name: 'app_system_no',
              property: 'appSystemNo',
              dataType: {
                dataType: 'stringType',
              },
              queryable: false,
              valueGetter: "( SELECT array_agg(elems.value->>'appSystemNo') FROM jsonb_array_elements(:sourceAlias.jsonb->'accounts') AS elems)",
              filterValueGetter: "( SELECT array_agg(lower(elems.value->>'appSystemNo')) FROM jsonb_array_elements(:sourceAlias.jsonb->'accounts') AS elems)",
              valueFunction: 'lower(:value)',
            },
            {
              name: 'payment_method',
              property: 'paymentMethod',
              dataType: {
                dataType: 'stringType',
              },
              queryable: false,
              valueGetter: "( SELECT array_agg(elems.value->>'paymentMethod') FROM jsonb_array_elements(:sourceAlias.jsonb->'accounts') AS elems)",
              filterValueGetter: "( SELECT array_agg(lower(elems.value->>'paymentMethod')) FROM jsonb_array_elements(:sourceAlias.jsonb->'accounts') AS elems)",
              valueFunction: 'lower(:value)',
              values: [
                {
                  value: 'Cash',
                  label: 'Cash',
                },
                {
                  value: 'Credit Card',
                  label: 'Credit card',
                },
                {
                  value: 'EFT',
                  label: 'Eft',
                },
                {
                  value: 'Deposit Account',
                  label: 'Deposit account',
                },
                {
                  value: 'Physical Check',
                  label: 'Physical check',
                },
                {
                  value: 'Bank Draft',
                  label: 'Bank draft',
                },
                {
                  value: 'Internal Transfer',
                  label: 'Internal transfer',
                },
                {
                  value: 'Other',
                  label: 'Other',
                },
              ],
            },
            {
              name: 'account_status',
              property: 'accountStatus',
              dataType: {
                dataType: 'stringType',
              },
              queryable: false,
              valueGetter: "( SELECT array_agg(elems.value->>'accountStatus') FROM jsonb_array_elements(:sourceAlias.jsonb->'accounts') AS elems)",
              filterValueGetter: "( SELECT array_agg(lower(elems.value->>'accountStatus')) FROM jsonb_array_elements(:sourceAlias.jsonb->'accounts') AS elems)",
              valueFunction: 'lower(:value)',
            },
            {
              name: 'contact_info',
              property: 'contactInfo',
              dataType: {
                dataType: 'stringType',
              },
              queryable: false,
              valueGetter: "( SELECT array_agg(elems.value->>'contactInfo') FROM jsonb_array_elements(:sourceAlias.jsonb->'accounts') AS elems)",
              filterValueGetter: "( SELECT array_agg(lower(elems.value->>'contactInfo')) FROM jsonb_array_elements(:sourceAlias.jsonb->'accounts') AS elems)",
              valueFunction: 'lower(:value)',
            },
            {
              name: 'library_code',
              property: 'libraryCode',
              dataType: {
                dataType: 'stringType',
              },
              queryable: false,
              valueGetter: "( SELECT array_agg(elems.value->>'libraryCode') FROM jsonb_array_elements(:sourceAlias.jsonb->'accounts') AS elems)",
              filterValueGetter: "( SELECT array_agg(lower(elems.value->>'libraryCode')) FROM jsonb_array_elements(:sourceAlias.jsonb->'accounts') AS elems)",
              valueFunction: 'lower(:value)',
            },
            {
              name: 'library_edi_code',
              property: 'libraryEdiCode',
              dataType: {
                dataType: 'stringType',
              },
              queryable: false,
              valueGetter: "( SELECT array_agg(elems.value->>'libraryEdiCode') FROM jsonb_array_elements(:sourceAlias.jsonb->'accounts') AS elems)",
              filterValueGetter: "( SELECT array_agg(lower(elems.value->>'libraryEdiCode')) FROM jsonb_array_elements(:sourceAlias.jsonb->'accounts') AS elems)",
              valueFunction: 'lower(:value)',
            },
            {
              name: 'notes',
              property: 'notes',
              dataType: {
                dataType: 'stringType',
              },
              queryable: false,
              valueGetter: "( SELECT array_agg(elems.value->>'notes') FROM jsonb_array_elements(:sourceAlias.jsonb->'accounts') AS elems)",
              filterValueGetter: "( SELECT array_agg(lower(elems.value->>'notes')) FROM jsonb_array_elements(:sourceAlias.jsonb->'accounts') AS elems)",
              valueFunction: 'lower(:value)',
            },
            //            {
            //              name: 'acq_unit_ids',
            //              property: 'acqUnitIds',
            //              dataType: {
            //                dataType: 'arrayType',
            //                itemDataType: {
            //                  dataType: 'rangedUUIDType',
            //                },
            //              },
            //              queryable: false,
            //              valueGetter: "(SELECT array_agg(elems.value->>'acqUnitIds' \
            //                    ORDER BY elems.value->>'acqUnitIds') \
            //                 FILTER (WHERE elems.value->>'acqUnitIds' IS NOT NULL) \
            //                 FROM jsonb_array_elements(:sourceAlias.jsonb->'accounts') AS elems)"
            //            },
            {
              name: 'acq_unit',
              property: 'acqUnit',
              dataType: {
                dataType: 'arrayType',
                itemDataType: {
                  dataType: 'stringType',
                },
              },
              queryable: false,
              valueGetter: "(SELECT jsonb_agg(acq_unit.jsonb ->> 'name' ORDER BY acq_unit.jsonb ->> 'name') \
                 FROM jsonb_array_elements_text((:sourceAlias.jsonb -> 'accounts'->'acqUnitIds')) id \
                 JOIN src_acquisitions_unit acq_unit ON id.value::text = acq_unit.id::text \
                 WHERE id.value IS NOT NULL)",
            },
          ],
        },
      },
      isIdColumn: false,
      queryable: false,
      visibleByDefault: false,
      valueGetter: "(SELECT jsonb_agg(record.value || \
                                    jsonb_build_object('acqUnit', \
                                    (SELECT jsonb_agg(acq_unit.jsonb ->> 'name') \
                                     FROM jsonb_array_elements_text(record.value -> 'acqUnitIds') id \
                                     JOIN src_acquisitions_unit acq_unit \
                                       ON id.value::text = acq_unit.id::text)) \
                                   ORDER BY record.value ->> 'acqUnitIds') \
                 FROM jsonb_array_elements((:sourceAlias.jsonb -> 'accounts')) record(value))::text",
    },
    {
      name: 'is_vendor',
      sourceAlias: 'org',
      dataType: {
        dataType: 'booleanType',
      },
      isIdColumn: false,
      queryable: true,
      visibleByDefault: false,
      essential: true,
      valueGetter: ":sourceAlias.jsonb->>'isVendor'",
      values: [
        {
          value: 'true',
          label: 'True',
        },
        {
          value: 'false',
          label: 'False',
        },
      ],
    },
    {
      name: 'is_donor',
      sourceAlias: 'org',
      dataType: {
        dataType: 'booleanType',
      },
      isIdColumn: false,
      queryable: true,
      visibleByDefault: false,
      essential: true,
      valueGetter: ":sourceAlias.jsonb->>'isDonor'",
      values: [
        {
          value: 'true',
          label: 'True',
        },
        {
          value: 'false',
          label: 'False',
        },
      ],
    },
    {
      name: 'san_code',
      sourceAlias: 'org',
      dataType: {
        dataType: 'stringType',
      },
      isIdColumn: false,
      queryable: true,
      visibleByDefault: false,
      valueGetter: ":sourceAlias.jsonb->>'sanCode'",
    },
    {
      name: 'changelogs',
      sourceAlias: 'org',
      dataType: {
        dataType: 'arrayType',
        itemDataType: {
          dataType: 'objectType',
          properties: [
            {
              name: 'description',
              property: 'description',
              dataType: {
                dataType: 'stringType',
              },
              queryable: false,
              valueGetter: "( SELECT array_agg(elems.value->>'description') FROM jsonb_array_elements(:sourceAlias.jsonb->'changelogs') AS elems)",
              filterValueGetter: "( SELECT array_agg(lower(elems.value->>'description')) FROM jsonb_array_elements(:sourceAlias.jsonb->'changelogs') AS elems)",
              valueFunction: 'lower(:value)',
            },
            {
              name: 'timestamp',
              property: 'timestamp',
              dataType: {
                dataType: 'dateTimeType',
              },
              queryable: false,
              valueGetter: "( SELECT array_agg(elems.value->>'timestamp') FROM jsonb_array_elements(:sourceAlias.jsonb->'changelogs') AS elems)",
              filterValueGetter: "( SELECT array_agg(lower(elems.value->>'timestamp')) FROM jsonb_array_elements(:sourceAlias.jsonb->'changelogs') AS elems)",
              valueFunction: 'lower(:value)',
            },
          ],
        },
      },
      isIdColumn: false,
      queryable: false,
      visibleByDefault: false,
      valueGetter: ":sourceAlias.jsonb->>'changelogs'",
    },
    {
      name: 'acq_unit_ids',
      sourceAlias: 'org',
      dataType: {
        dataType: 'jsonbArrayType',
        itemDataType: {
          dataType: 'rangedUUIDType',
        },
      },
      isIdColumn: false,
      queryable: false,
      visibleByDefault: false,
      hidden: true,
      valueGetter: "(:sourceAlias.jsonb -> 'acqUnitIds'::text)",
      filterValueGetter: "(:sourceAlias.jsonb -> 'acqUnitIds'::text)",
    },
    {
      name: 'acq_unit_names',
      sourceAlias: 'org',
      dataType: {
        dataType: 'jsonbArrayType',
        itemDataType: {
          dataType: 'stringType',
        },
      },
      idColumnName: 'acq_unit_ids',
      queryable: true,
      visibleByDefault: false,
      valueGetter: "( SELECT jsonb_agg(acq_unit.jsonb ->> 'name') FILTER (WHERE (acq_unit.jsonb ->> 'name') IS NOT NULL) FROM jsonb_array_elements_text(:sourceAlias.jsonb -> 'acqUnitIds') record(value) JOIN src_acquisitions_unit acq_unit ON record.value::text = acq_unit.id::text )",
      filterValueGetter: "( SELECT jsonb_agg(lower(acq_unit.jsonb ->> 'name')) FILTER (WHERE (acq_unit.jsonb ->> 'name') IS NOT NULL) FROM jsonb_array_elements_text(:sourceAlias.jsonb -> 'acqUnitIds') record(value) JOIN src_acquisitions_unit acq_unit ON record.value::text = acq_unit.id::text )",
      valueFunction: 'lower(:value)',
      source: {
        entityTypeId: '661633d0-4cb5-4764-a108-2132b80320ec',
        columnName: 'name',
      },
      valueSourceApi: {
        path: 'acquisitions-units/units',
        valueJsonPath: '$.acquisitionsUnits.*.id',
        labelJsonPath: '$.acquisitionsUnits.*.name',
      },
    },
    {
      name: 'edi_vendor_edi_code',
      sourceAlias: 'org',
      dataType: {
        dataType: 'stringType',
      },
      isIdColumn: false,
      queryable: true,
      visibleByDefault: false,
      essential: true,
      valueGetter: ":sourceAlias.jsonb->'edi'->>'vendorEdiCode'",
    },
    {
      name: 'edi_vendor_edi_type',
      sourceAlias: 'org',
      dataType: {
        dataType: 'stringType',
      },
      isIdColumn: false,
      queryable: true,
      visibleByDefault: false,
      essential: true,
      valueGetter: ":sourceAlias.jsonb->'edi'->>'vendorEdiType'",
      values: [
        {
          value: '014/EAN',
          label: '014/EAN',
        },
        {
          value: '31B/US-SAN',
          label: '31B/US-SAN',
        },
        {
          value: '091/Vendor-assigned',
          label: '091/Vendor-assigned',
        },
        {
          value: '092/Customer-assigned',
          label: '092/Customer-assigned',
        },
      ],
    },
    {
      name: 'edi_lib_edi_code',
      sourceAlias: 'org',
      dataType: {
        dataType: 'stringType',
      },
      isIdColumn: false,
      queryable: true,
      visibleByDefault: false,
      valueGetter: ":sourceAlias.jsonb->'edi'->>'libEdiCode'",
    },
    {
      name: 'edi_lib_edi_type',
      sourceAlias: 'org',
      dataType: {
        dataType: 'stringType',
      },
      isIdColumn: false,
      queryable: true,
      visibleByDefault: false,
      valueGetter: ":sourceAlias.jsonb->'edi'->>'libEdiType'",
      values: [
        {
          value: '014/EAN',
          label: '014 ean',
        },
        {
          value: '31B/US-SAN',
          label: '31 b us san',
        },
        {
          value: '091/Vendor-assigned',
          label: '091 vendor assigned',
        },
        {
          value: '092/Customer-assigned',
          label: '092 customer assigned',
        },
      ],
    },
    {
      name: 'edi_prorate_tax',
      sourceAlias: 'org',
      dataType: {
        dataType: 'booleanType',
      },
      isIdColumn: false,
      queryable: true,
      visibleByDefault: false,
      hidden: true,
      valueGetter: ":sourceAlias.jsonb->'edi'->>'prorateTax'",
      values: [
        {
          value: 'true',
          label: 'True',
        },
        {
          value: 'false',
          label: 'False',
        },
      ],
    },
    {
      name: 'edi_prorate_fees',
      sourceAlias: 'org',
      dataType: {
        dataType: 'booleanType',
      },
      isIdColumn: false,
      queryable: true,
      visibleByDefault: false,
      hidden: true,
      valueGetter: ":sourceAlias.jsonb->'edi'->>'prorateFees'",
      values: [
        {
          value: 'true',
          label: 'True',
        },
        {
          value: 'false',
          label: 'False',
        },
      ],
    },
    {
      name: 'edi_naming_convention',
      sourceAlias: 'org',
      dataType: {
        dataType: 'stringType',
      },
      isIdColumn: false,
      queryable: true,
      visibleByDefault: false,
      hidden: true,
      valueGetter: ":sourceAlias.jsonb->'edi'->>'ediNamingConvention'",
    },
    {
      name: 'edi_send_acct_num',
      sourceAlias: 'org',
      dataType: {
        dataType: 'booleanType',
      },
      isIdColumn: false,
      queryable: true,
      visibleByDefault: false,
      hidden: true,
      valueGetter: ":sourceAlias.jsonb->'edi'->>'sendAcctNum'",
      values: [
        {
          value: 'true',
          label: 'True',
        },
        {
          value: 'false',
          label: 'False',
        },
      ],
    },
    {
      name: 'edi_support_order',
      sourceAlias: 'org',
      dataType: {
        dataType: 'booleanType',
      },
      isIdColumn: false,
      queryable: true,
      visibleByDefault: false,
      hidden: true,
      valueGetter: ":sourceAlias.jsonb->'edi'->>'supportOrder'",
      values: [
        {
          value: 'true',
          label: 'True',
        },
        {
          value: 'false',
          label: 'False',
        },
      ],
    },
    {
      name: 'edi_support_invoice',
      sourceAlias: 'org',
      dataType: {
        dataType: 'booleanType',
      },
      isIdColumn: false,
      queryable: true,
      visibleByDefault: false,
      hidden: true,
      valueGetter: ":sourceAlias.jsonb->'edi'->>'supportInvoice'",
      values: [
        {
          value: 'true',
          label: 'True',
        },
        {
          value: 'false',
          label: 'False',
        },
      ],
    },
    {
      name: 'edi_notes',
      sourceAlias: 'org',
      dataType: {
        dataType: 'stringType',
      },
      isIdColumn: false,
      queryable: true,
      visibleByDefault: false,
      valueGetter: ":sourceAlias.jsonb->'edi'->>'notes'",
    },
    {
      name: 'edi_ftp_format',
      sourceAlias: 'org',
      dataType: {
        dataType: 'stringType',
      },
      isIdColumn: false,
      queryable: true,
      visibleByDefault: false,
      hidden: true,
      valueGetter: ":sourceAlias.jsonb->'edi'->'ediFtp'->>'ftpFormat'",
      values: [
        {
          value: 'SFTP',
          label: 'SFTP',
        },
        {
          value: 'FTP',
          label: 'FTP',
        },
      ],
    },
    {
      name: 'edi_ftp_server_address',
      sourceAlias: 'org',
      dataType: {
        dataType: 'stringType',
      },
      isIdColumn: false,
      queryable: true,
      visibleByDefault: false,
      hidden: true,
      valueGetter: ":sourceAlias.jsonb->'edi'->'ediFtp'->>'serverAddress'",
    },
    {
      name: 'edi_ftp_username',
      sourceAlias: 'org',
      dataType: {
        dataType: 'stringType',
      },
      isIdColumn: false,
      queryable: true,
      visibleByDefault: false,
      hidden: true,
      valueGetter: ":sourceAlias.jsonb->'edi'->'ediFtp'->>'username'",
    },
    {
      name: 'edi_ftp_mode',
      sourceAlias: 'org',
      dataType: {
        dataType: 'stringType',
      },
      isIdColumn: false,
      queryable: true,
      visibleByDefault: false,
      hidden: true,
      valueGetter: ":sourceAlias.jsonb->'edi'->'ediFtp'->>'ftpMode'",
      values: [
        {
          value: 'ASCII',
          label: 'ASCII',
        },
        {
          value: 'Binary',
          label: 'Binary',
        },
      ],
    },
    {
      name: 'edi_ftp_conn_mode',
      sourceAlias: 'org',
      dataType: {
        dataType: 'stringType',
      },
      isIdColumn: false,
      queryable: true,
      visibleByDefault: false,
      hidden: true,
      valueGetter: ":sourceAlias.jsonb->'edi'->'ediFtp'->>'ftpConnMode'",
      values: [
        {
          value: 'Active',
          label: 'Active',
        },
        {
          value: 'Passive',
          label: 'Passive',
        },
      ],
    },
    {
      name: 'edi_ftp_port',
      sourceAlias: 'org',
      dataType: {
        dataType: 'integerType',
      },
      isIdColumn: false,
      queryable: true,
      visibleByDefault: false,
      hidden: true,
      valueGetter: ":sourceAlias.jsonb->'edi'->'ediFtp'->>'ftpPort'",
    },
    {
      name: 'edi_ftp_order_directory',
      sourceAlias: 'org',
      dataType: {
        dataType: 'stringType',
      },
      isIdColumn: false,
      queryable: true,
      visibleByDefault: false,
      hidden: true,
      valueGetter: ":sourceAlias.jsonb->'edi'->'ediFtp'->>'orderDirectory'",
    },
    {
      name: 'edi_ftp_invoice_directory',
      sourceAlias: 'org',
      dataType: {
        dataType: 'stringType',
      },
      isIdColumn: false,
      queryable: true,
      visibleByDefault: false,
      hidden: true,
      valueGetter: ":sourceAlias.jsonb->'edi'->'ediFtp'->>'invoiceDirectory'",
    },
    {
      name: 'edi_ftp_notes',
      sourceAlias: 'org',
      dataType: {
        dataType: 'stringType',
      },
      isIdColumn: false,
      queryable: true,
      visibleByDefault: false,
      hidden: true,
      valueGetter: ":sourceAlias.jsonb->'edi'->'ediFtp'->>'notes'",
    },
    {
      name: 'edi_job_schedule_edi',
      sourceAlias: 'org',
      dataType: {
        dataType: 'booleanType',
      },
      isIdColumn: false,
      queryable: true,
      visibleByDefault: false,
      valueGetter: ":sourceAlias.jsonb->'edi'->'ediJob'->>'scheduleEdi'",
      values: [
        {
          value: 'true',
          label: 'True',
        },
        {
          value: 'false',
          label: 'False',
        },
      ],
    },
    {
      name: 'edi_job_scheduling_date',
      sourceAlias: 'org',
      dataType: {
        dataType: 'dateTimeType',
      },
      isIdColumn: false,
      queryable: true,
      visibleByDefault: false,
      hidden: true,
      valueGetter: ":sourceAlias.jsonb->'edi'->'ediJob'->>'schedulingDate'",
    },
    {
      name: 'edi_job_time',
      sourceAlias: 'org',
      dataType: {
        dataType: 'stringType',
      },
      isIdColumn: false,
      queryable: true,
      visibleByDefault: false,
      hidden: true,
      valueGetter: ":sourceAlias.jsonb->'edi'->'ediJob'->>'time'",
    },
    {
      name: 'edi_job_is_monday',
      sourceAlias: 'org',
      dataType: {
        dataType: 'booleanType',
      },
      isIdColumn: false,
      queryable: true,
      visibleByDefault: false,
      hidden: true,
      valueGetter: ":sourceAlias.jsonb->'edi'->'ediJob'->>'isMonday'",
      values: [
        {
          value: 'true',
          label: 'True',
        },
        {
          value: 'false',
          label: 'False',
        },
      ],
    },
    {
      name: 'edi_job_is_tuesday',
      sourceAlias: 'org',
      dataType: {
        dataType: 'booleanType',
      },
      isIdColumn: false,
      queryable: true,
      visibleByDefault: false,
      hidden: true,
      valueGetter: ":sourceAlias.jsonb->'edi'->'ediJob'->>'isTuesday'",
      values: [
        {
          value: 'true',
          label: 'True',
        },
        {
          value: 'false',
          label: 'False',
        },
      ],
    },
    {
      name: 'edi_job_is_wednesday',
      sourceAlias: 'org',
      dataType: {
        dataType: 'booleanType',
      },
      isIdColumn: false,
      queryable: true,
      visibleByDefault: false,
      hidden: true,
      valueGetter: ":sourceAlias.jsonb->'edi'->'ediJob'->>'isWednesday'",
      values: [
        {
          value: 'true',
          label: 'True',
        },
        {
          value: 'false',
          label: 'False',
        },
      ],
    },
    {
      name: 'edi_job_is_thursday',
      sourceAlias: 'org',
      dataType: {
        dataType: 'booleanType',
      },
      isIdColumn: false,
      queryable: true,
      visibleByDefault: false,
      hidden: true,
      valueGetter: ":sourceAlias.jsonb->'edi'->'ediJob'->>'isThursday'",
      values: [
        {
          value: 'true',
          label: 'True',
        },
        {
          value: 'false',
          label: 'False',
        },
      ],
    },
    {
      name: 'edi_job_is_friday',
      sourceAlias: 'org',
      dataType: {
        dataType: 'booleanType',
      },
      isIdColumn: false,
      queryable: true,
      visibleByDefault: false,
      hidden: true,
      valueGetter: ":sourceAlias.jsonb->'edi'->'ediJob'->>'isFriday'",
      values: [
        {
          value: 'true',
          label: 'True',
        },
        {
          value: 'false',
          label: 'False',
        },
      ],
    },
    {
      name: 'edi_job_is_saturday',
      sourceAlias: 'org',
      dataType: {
        dataType: 'booleanType',
      },
      isIdColumn: false,
      queryable: true,
      visibleByDefault: false,
      hidden: true,
      valueGetter: ":sourceAlias.jsonb->'edi'->'ediJob'->>'isSaturday'",
      values: [
        {
          value: 'true',
          label: 'True',
        },
        {
          value: 'false',
          label: 'False',
        },
      ],
    },
    {
      name: 'edi_job_is_sunday',
      sourceAlias: 'org',
      dataType: {
        dataType: 'booleanType',
      },
      isIdColumn: false,
      queryable: true,
      visibleByDefault: false,
      hidden: true,
      valueGetter: ":sourceAlias.jsonb->'edi'->'ediJob'->>'isSunday'",
      values: [
        {
          value: 'true',
          label: 'True',
        },
        {
          value: 'false',
          label: 'False',
        },
      ],
    },
    {
      name: 'edi_job_send_to_emails',
      sourceAlias: 'org',
      dataType: {
        dataType: 'stringType',
      },
      isIdColumn: false,
      queryable: true,
      visibleByDefault: false,
      hidden: true,
      valueGetter: ":sourceAlias.jsonb->'edi'->'ediJob'->>'sendToEmails'",
    },
    {
      name: 'edi_job_notify_all_edi',
      sourceAlias: 'org',
      dataType: {
        dataType: 'booleanType',
      },
      isIdColumn: false,
      queryable: true,
      visibleByDefault: false,
      hidden: true,
      valueGetter: ":sourceAlias.jsonb->'edi'->'ediJob'->>'notifyAllEdi'",
      values: [
        {
          value: 'true',
          label: 'True',
        },
        {
          value: 'false',
          label: 'False',
        },
      ],
    },
    {
      name: 'edi_job_notify_invoice_only',
      sourceAlias: 'org',
      dataType: {
        dataType: 'booleanType',
      },
      isIdColumn: false,
      queryable: true,
      visibleByDefault: false,
      hidden: true,
      valueGetter: ":sourceAlias.jsonb->'edi'->'ediJob'->>'notifyInvoiceOnly'",
      values: [
        {
          value: 'true',
          label: 'True',
        },
        {
          value: 'false',
          label: 'False',
        },
      ],
    },
    {
      name: 'edi_job_notify_error_only',
      sourceAlias: 'org',
      dataType: {
        dataType: 'booleanType',
      },
      isIdColumn: false,
      queryable: true,
      visibleByDefault: false,
      hidden: true,
      valueGetter: ":sourceAlias.jsonb->'edi'->'ediJob'->>'notifyErrorOnly'",
      values: [
        {
          value: 'true',
          label: 'True',
        },
        {
          value: 'false',
          label: 'False',
        },
      ],
    },
    {
      name: 'edi_job_scheduling_notes',
      sourceAlias: 'org',
      dataType: {
        dataType: 'stringType',
      },
      isIdColumn: false,
      queryable: true,
      visibleByDefault: false,
      hidden: true,
      valueGetter: ":sourceAlias.jsonb->'edi'->'ediJob'->>'schedulingNotes'",
    },
    {
      name: 'jsonb',
      sourceAlias: 'org',
      dataType: {
        dataType: 'stringType',
      },
      isIdColumn: false,
      queryable: false,
      hidden: true,
      visibleByDefault: false,
      essential: true,
      valueGetter: ':sourceAlias.jsonb::text',
    },
  ],
  defaultSort: [
    {
      columnName: 'id',
      direction: 'ASC',
    },
  ],
}
